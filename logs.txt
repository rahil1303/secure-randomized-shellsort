(base) rahilsharma@Rahils-MacBook-Air Random-Shell-Sort % python main.py


    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                                  â•‘
    â•‘  RANDOMIZED SHELL SORT - FULL PIPELINE DEMO                     â•‘
    â•‘  Using Original OBFI Modules (Elaborate & Feature-Complete)     â•‘
    â•‘                                                                  â•‘
    â•‘  Phase 0: data_creation_0.py (with verification)                â•‘
    â•‘  Phase 1: obfi_gen_hash_2.py (with detailed logging)            â•‘
    â•‘  Phase 2: client.py (Randomized Shell Sort)                     â•‘
    â•‘                                                                  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    

======================================================================
ğŸš€ FULL PIPELINE - USING ORIGINAL OBFI MODULES
======================================================================
ğŸ“Š Auto-calculated Bloom filter size: m = 1438

ğŸ“‹ Pipeline Parameters:
   Elements (s): 100
   Range (n): [0, 9999]
   Hash functions (k): 4
   Bloom filter size (m): 1438
   Total hash positions: 400

ğŸ” Generated encryption keys (CLIENT-SIDE ONLY)
   Keys will NEVER be sent to server

ğŸ”Œ Connecting to server at localhost:50051...

======================================================================
PHASE 0: CALLING data_creation_0.run_phase0_upload()
======================================================================
ğŸ” DEBUG: Using passed parameters s=100, n=10000
================================================================================
ğŸ”¬ OBD PARAMETER CALCULATION SUMMARY
================================================================================
âŒ GUARD CONDITION FAILED
ğŸ“Š Input: s=100, n=10000, Î»=128
ğŸ›¡ï¸  Guard: 3.278 < 128 (required)
âš ï¸  OBD SKIPPED: Using fallback z=1, t=100
================================================================================
ğŸ” DEBUG: Final parameters - s=100, n=10000
ğŸ” DEBUG: OBD globals - PROTOCOL_S=100, PROTOCOL_N=10000

=== Phase 0: Uploading 100 Encrypted Elements to Server ===
Parameters: s=100, n=10000, valid=False
âœ… Server initialized for 100 elements
  Uploaded element 1/100 (success rate: 1/1)
  Uploaded element 100/100 (success rate: 100/100)
âœ… Phase 0 complete: 100/100 elements uploaded
âœ… Phase 0 SUCCESS: 100.0% upload rate

============================================================
ğŸ” PHASE 0 SERVER STORAGE VERIFICATION
============================================================
ğŸ“Š Verification Parameters:
   Total elements uploaded: 100
   Sample size to check: 100
   Expected value range: [0, 9820]

ğŸ” Reading back elements from server...

ğŸ“‹ SERVER STORAGE CONTENTS (First 100 elements):
   [   0] Expected:  4848 | Stored:  4848 | âœ…
   [   1] Expected:  9125 | Stored:  9125 | âœ…
   [   2] Expected:  5549 | Stored:  5549 | âœ…
   [   3] Expected:  9568 | Stored:  9568 | âœ…
   [   4] Expected:  3784 | Stored:  3784 | âœ…
   [   5] Expected:  6178 | Stored:  6178 | âœ…
   [   6] Expected:  9058 | Stored:  9058 | âœ…
   [   7] Expected:  8747 | Stored:  8747 | âœ…
   [   8] Expected:  8594 | Stored:  8594 | âœ…
   [   9] Expected:  6543 | Stored:  6543 | âœ…
   [  10] Expected:  3445 | Stored:  3445 | âœ…
   [  11] Expected:  5187 | Stored:  5187 | âœ…
   [  12] Expected:   860 | Stored:   860 | âœ…
   [  13] Expected:  2272 | Stored:  2272 | âœ…
   [  14] Expected:  3414 | Stored:  3414 | âœ…
   [  15] Expected:  2469 | Stored:  2469 | âœ…
   [  16] Expected:  5938 | Stored:  5938 | âœ…
   [  17] Expected:  4594 | Stored:  4594 | âœ…
   [  18] Expected:  2561 | Stored:  2561 | âœ…
   [  19] Expected:  4456 | Stored:  4456 | âœ…
   [  20] Expected:  9130 | Stored:  9130 | âœ…
   [  21] Expected:  3897 | Stored:  3897 | âœ…
   [  22] Expected:  6019 | Stored:  6019 | âœ…
   [  23] Expected:  5121 | Stored:  5121 | âœ…
   [  24] Expected:  8024 | Stored:  8024 | âœ…
   ... (75 more elements checked) ...

ğŸ“Š VERIFICATION SUMMARY:
   âœ… Perfect matches: 100
   âŒ Mismatches: 0
   âš ï¸  Read errors: 0
   ğŸ“ˆ Success rate: 100.0%

ğŸ“ˆ GENERATED DATA STATISTICS:
   ğŸ² Min value: 311
   ğŸ² Max value: 9820
   ğŸ² Average: 5365.3
   ğŸ² Unique values: 99 / 100
   ğŸ² First 20 generated values: [4848, 9125, 5549, 9568, 3784, 6178, 9058, 8747, 8594, 6543, 3445, 5187, 860, 2272, 3414, 2469, 5938, 4594, 2561, 4456]

ğŸ‰ PERFECT! All elements correctly stored on server!
ğŸ’¾ Saved 100 elements to original_elements.json

======================================================================
PHASE 1: CALLING obfi_gen_hash_2.generate_hash_values_streaming()
======================================================================

ğŸ“‹ Figure 7 Lines 4-17: Hash Value Generation (Streaming)
============================================================
ğŸ“Š Parameters:
   Elements: 100
   Hash functions (k): 4
   Bloom filter size (m): 1438
   Total hashes to stream: 400
ğŸ”‘ Generated 4 hash functions
âœ… Server ready to receive encrypted hash values

ğŸ“¤ Streaming hash values to server...
   âœ… Processed 100/100 elements (400 hashes streamed)

âœ… Streaming complete!
ğŸ“¦ Streamed 400 encrypted hash values to server
   Expected: 400
   Match: YES âœ…
âœ… Server confirmed: EV array ready with 400 values
ğŸ“‹ Ready for Line 18: OBD Protocol

ğŸ”„ Switching server to sorting mode...
âœ… Server ready for sorting: array size = 400

======================================================================
PHASE 2: RANDOMIZED SHELL SORT (O(1) CLIENT MEMORY)
======================================================================
Array size: 400
Client working memory: O(1) (only 2 decrypted values at a time)
[CLIENT] Initialized with O(1) memory
[CLIENT] Encryption key is SECRET (never sent to server)

ğŸ”„ Starting Randomized Shell Sort...

======================================================================
SECURE RANDOMIZED SHELL SORT - CLIENT ORCHESTRATING
Array size: 400
======================================================================

[CLIENT] Iteration 1: offset = 200 (2 regions)

âŒ Pipeline failed: <_InactiveRpcError of RPC that terminated with:
        status = StatusCode.UNKNOWN
        details = "Exception calling application: 'bytes' object cannot be interpreted as an integer"
        debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"Exception calling application: \'bytes\' object cannot be interpreted as an integer", grpc_status:2}"
>
Traceback (most recent call last):
  File "/Users/rahilsharma/Desktop/CWI/Random-Shell-Sort/main.py", line 160, in run_full_pipeline
    randomized_shellsort(client, array_size)
  File "/Users/rahilsharma/Desktop/CWI/Random-Shell-Sort/client.py", line 178, in randomized_shellsort
    region_compare_exchange(client, region_a_start, region_b_start, offset)
  File "/Users/rahilsharma/Desktop/CWI/Random-Shell-Sort/client.py", line 152, in region_compare_exchange
    new_enc_a, new_enc_b = client.compare_and_prepare_writes(idx_a, idx_b)
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/rahilsharma/Desktop/CWI/Random-Shell-Sort/client.py", line 82, in compare_and_prepare_writes
    resp = self.stub.GetPair(
           ^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/grpc/_channel.py", line 1178, in __call__
    return _end_unary_response_blocking(state, call, False, None)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/anaconda3/lib/python3.12/site-packages/grpc/_channel.py", line 1006, in _end_unary_response_blocking
    raise _InactiveRpcError(state)  # pytype: disable=not-instantiable
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
grpc._channel._InactiveRpcError: <_InactiveRpcError of RPC that terminated with:
        status = StatusCode.UNKNOWN
        details = "Exception calling application: 'bytes' object cannot be interpreted as an integer"
        debug_error_string = "UNKNOWN:Error received from peer  {grpc_message:"Exception calling application: \'bytes\' object cannot be interpreted as an integer", grpc_status:2}"
>

âŒ Demo failed - check errors above
(base) rahilsharma@Rahils-MacBook-Air Random-Shell-Sort % python main.py


    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                                  â•‘
    â•‘  RANDOMIZED SHELL SORT - FULL PIPELINE DEMO                     â•‘
    â•‘  Using Original OBFI Modules (Elaborate & Feature-Complete)     â•‘
    â•‘                                                                  â•‘
    â•‘  Phase 0: data_creation_0.py (with verification)                â•‘
    â•‘  Phase 1: obfi_gen_hash_2.py (with detailed logging)            â•‘
    â•‘  Phase 2: client.py (Randomized Shell Sort)                     â•‘
    â•‘                                                                  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    

======================================================================
ğŸš€ FULL PIPELINE - USING ORIGINAL OBFI MODULES
======================================================================
ğŸ“Š Auto-calculated Bloom filter size: m = 1438

ğŸ“‹ Pipeline Parameters:
   Elements (s): 100
   Range (n): [0, 9999]
   Hash functions (k): 4
   Bloom filter size (m): 1438
   Total hash positions: 400

ğŸ” Generated encryption keys (CLIENT-SIDE ONLY)
   Keys will NEVER be sent to server

ğŸ”Œ Connecting to server at localhost:50051...

======================================================================
PHASE 0: CALLING data_creation_0.run_phase0_upload()
======================================================================
ğŸ” DEBUG: Using passed parameters s=100, n=10000
================================================================================
ğŸ”¬ OBD PARAMETER CALCULATION SUMMARY
================================================================================
âŒ GUARD CONDITION FAILED
ğŸ“Š Input: s=100, n=10000, Î»=128
ğŸ›¡ï¸  Guard: 3.278 < 128 (required)
âš ï¸  OBD SKIPPED: Using fallback z=1, t=100
================================================================================
ğŸ” DEBUG: Final parameters - s=100, n=10000
ğŸ” DEBUG: OBD globals - PROTOCOL_S=100, PROTOCOL_N=10000

=== Phase 0: Uploading 100 Encrypted Elements to Server ===
Parameters: s=100, n=10000, valid=False
âœ… Server initialized for 100 elements
  Uploaded element 1/100 (success rate: 1/1)
  Uploaded element 100/100 (success rate: 100/100)
âœ… Phase 0 complete: 100/100 elements uploaded
âœ… Phase 0 SUCCESS: 100.0% upload rate

============================================================
ğŸ” PHASE 0 SERVER STORAGE VERIFICATION
============================================================
ğŸ“Š Verification Parameters:
   Total elements uploaded: 100
   Sample size to check: 100
   Expected value range: [0, 9969]

ğŸ” Reading back elements from server...

ğŸ“‹ SERVER STORAGE CONTENTS (First 100 elements):
   [   0] Expected:  9871 | Stored:  9871 | âœ…
   [   1] Expected:  2701 | Stored:  2701 | âœ…
   [   2] Expected:  9254 | Stored:  9254 | âœ…
   [   3] Expected:  2600 | Stored:  2600 | âœ…
   [   4] Expected:  4931 | Stored:  4931 | âœ…
   [   5] Expected:  1773 | Stored:  1773 | âœ…
   [   6] Expected:  3994 | Stored:  3994 | âœ…
   [   7] Expected:  7642 | Stored:  7642 | âœ…
   [   8] Expected:  9095 | Stored:  9095 | âœ…
   [   9] Expected:  5755 | Stored:  5755 | âœ…
   [  10] Expected:  7478 | Stored:  7478 | âœ…
   [  11] Expected:  3879 | Stored:  3879 | âœ…
   [  12] Expected:  5647 | Stored:  5647 | âœ…
   [  13] Expected:  8837 | Stored:  8837 | âœ…
   [  14] Expected:  3964 | Stored:  3964 | âœ…
   [  15] Expected:  9466 | Stored:  9466 | âœ…
   [  16] Expected:  3870 | Stored:  3870 | âœ…
   [  17] Expected:  3525 | Stored:  3525 | âœ…
   [  18] Expected:  6894 | Stored:  6894 | âœ…
   [  19] Expected:   491 | Stored:   491 | âœ…
   [  20] Expected:  5561 | Stored:  5561 | âœ…
   [  21] Expected:  5268 | Stored:  5268 | âœ…
   [  22] Expected:  4113 | Stored:  4113 | âœ…
   [  23] Expected:  9319 | Stored:  9319 | âœ…
   [  24] Expected:  8781 | Stored:  8781 | âœ…
   ... (75 more elements checked) ...

ğŸ“Š VERIFICATION SUMMARY:
   âœ… Perfect matches: 100
   âŒ Mismatches: 0
   âš ï¸  Read errors: 0
   ğŸ“ˆ Success rate: 100.0%

ğŸ“ˆ GENERATED DATA STATISTICS:
   ğŸ² Min value: 225
   ğŸ² Max value: 9969
   ğŸ² Average: 4508.2
   ğŸ² Unique values: 99 / 100
   ğŸ² First 20 generated values: [9871, 2701, 9254, 2600, 4931, 1773, 3994, 7642, 9095, 5755, 7478, 3879, 5647, 8837, 3964, 9466, 3870, 3525, 6894, 491]

ğŸ‰ PERFECT! All elements correctly stored on server!
ğŸ’¾ Saved 100 elements to original_elements.json

======================================================================
PHASE 1: CALLING obfi_gen_hash_2.generate_hash_values_streaming()
======================================================================

ğŸ“‹ Figure 7 Lines 4-17: Hash Value Generation (Streaming)
============================================================
ğŸ“Š Parameters:
   Elements: 100
   Hash functions (k): 4
   Bloom filter size (m): 1438
   Total hashes to stream: 400
ğŸ”‘ Generated 4 hash functions
âœ… Server ready to receive encrypted hash values

ğŸ“¤ Streaming hash values to server...
   âœ… Processed 100/100 elements (400 hashes streamed)

âœ… Streaming complete!
ğŸ“¦ Streamed 400 encrypted hash values to server
   Expected: 400
   Match: YES âœ…
âœ… Server confirmed: EV array ready with 400 values
ğŸ“‹ Ready for Line 18: OBD Protocol

ğŸ”„ Switching server to sorting mode...
âœ… Server ready for sorting: array size = 400

======================================================================
PHASE 2: RANDOMIZED SHELL SORT (O(1) CLIENT MEMORY)
======================================================================
Array size: 400
Client working memory: O(1) (only 2 decrypted values at a time)
[CLIENT] Initialized with O(1) memory
[CLIENT] Encryption key is SECRET (never sent to server)

ğŸ”„ Starting Randomized Shell Sort...

======================================================================
SECURE RANDOMIZED SHELL SORT - CLIENT ORCHESTRATING
Array size: 400
======================================================================

[CLIENT] Iteration 1: offset = 200 (2 regions)

[CLIENT] Iteration 2: offset = 100 (4 regions)

[CLIENT] Iteration 3: offset = 50 (8 regions)

[CLIENT] Iteration 4: offset = 25 (16 regions)

[CLIENT] Iteration 5: offset = 12 (33 regions)

[CLIENT] Iteration 6: offset = 6 (66 regions)

[CLIENT] Iteration 7: offset = 3 (133 regions)

[CLIENT] Iteration 8: offset = 1 (400 regions)

======================================================================
[CLIENT] SORTING COMPLETE
======================================================================

ğŸ” Decrypting final result to verify...

======================================================================
ğŸ“Š PHASE 2 RESULTS
======================================================================
   Sorted: YES âœ…
   Total comparisons: 51916
   Total writes: 51916
   First 32 values: [4, 9, 11, 13, 14, 20, 24, 32, 33, 34, 35, 36, 43, 44, 49, 51, 53, 60, 60, 65, 69, 76, 92, 93, 95, 95, 105, 111, 113, 114, 116, 116]

======================================================================
ğŸ‰ PIPELINE COMPLETE
======================================================================
âœ… Phase 0: 100 elements uploaded (with verification)
âœ… Phase 1: 400 hash positions generated (with verification)
âœ… Phase 2: Array sorted with 51916 comparisons

ğŸ” Security Guarantees:
   âœ… Server never received encryption keys
   âœ… Server never saw plaintext values
   âœ… Client used O(1) memory during sorting
   âœ… Access pattern was data-independent

ğŸ“ Verification:
   âœ… Phase 0 verification completed (see above)
   âœ… Phase 1 hash count verified
   âœ… Phase 2 sorting verified: True

ğŸ’¾ Debug Files:
   - original_elements.json (plaintext elements for verification)
======================================================================

âœ… Demo completed successfully!
(base) rahilsharma@Rahils-MacBook-Air Random-Shell-Sort % python main.py


    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                                  â•‘
    â•‘  RANDOMIZED SHELL SORT - FULL PIPELINE DEMO                     â•‘
    â•‘  Using Original OBFI Modules (Elaborate & Feature-Complete)     â•‘
    â•‘                                                                  â•‘
    â•‘  Phase 0: data_creation_0.py (with verification)                â•‘
    â•‘  Phase 1: obfi_gen_hash_2.py (with detailed logging)            â•‘
    â•‘  Phase 2: client.py (Randomized Shell Sort)                     â•‘
    â•‘                                                                  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    

======================================================================
ğŸš€ FULL PIPELINE - USING ORIGINAL OBFI MODULES
======================================================================
ğŸ“Š Auto-calculated Bloom filter size: m = 35944

ğŸ“‹ Pipeline Parameters:
   Elements (s): 2500
   Range (n): [0, 9999]
   Hash functions (k): 7
   Bloom filter size (m): 35944
   Total hash positions: 17500

ğŸ” Generated encryption keys (CLIENT-SIDE ONLY)
   Keys will NEVER be sent to server

ğŸ”Œ Connecting to server at localhost:50051...

======================================================================
PHASE 0: CALLING data_creation_0.run_phase0_upload()
======================================================================
ğŸ” DEBUG: Using passed parameters s=2500, n=10000
================================================================================
ğŸ”¬ OBD PARAMETER CALCULATION SUMMARY
================================================================================
ğŸ“Š Input Parameters:
   s (elements): 2,500
   n (range): [0, 9,999]
   Î» (security): 128

ğŸ›¡ï¸  Security Verification:
   Guard condition: 189.264 â‰¥ 128 âœ…
   Robustness: Ï = 128

ğŸ“ Calculated Parameters:
   Ï‰ (subrange size): 6,552
   z (bucket count): 2
   c bounds: [2356.126, 2356.235]
   c (chosen): 2356.181
   t (capacity): 2,357

ğŸ“Š Mathematical Properties:
   sÏ‰/n ratio: 1638.000
   Expected elements per bucket: 1250.0
   Safety margin: 1107.0
================================================================================
ğŸ” DEBUG: Final parameters - s=2500, n=10000
ğŸ” DEBUG: OBD globals - PROTOCOL_S=2500, PROTOCOL_N=10000

=== Phase 0: Uploading 2500 Encrypted Elements to Server ===
Parameters: s=2500, n=10000, valid=True
âœ… Server initialized for 2500 elements
  Uploaded element 1/2500 (success rate: 1/1)
  Uploaded element 1001/2500 (success rate: 1001/1001)
  Uploaded element 2001/2500 (success rate: 2001/2001)
  Uploaded element 2500/2500 (success rate: 2500/2500)
âœ… Phase 0 complete: 2500/2500 elements uploaded
âœ… Phase 0 SUCCESS: 100.0% upload rate

============================================================
ğŸ” PHASE 0 SERVER STORAGE VERIFICATION
============================================================
ğŸ“Š Verification Parameters:
   Total elements uploaded: 2500
   Sample size to check: 2500
   Expected value range: [0, 9997]

ğŸ” Reading back elements from server...

ğŸ“‹ SERVER STORAGE CONTENTS (First 2500 elements):
   [   0] Expected:  6520 | Stored:  6520 | âœ…
   [   1] Expected:  3457 | Stored:  3457 | âœ…
   [   2] Expected:  6445 | Stored:  6445 | âœ…
   [   3] Expected:  9583 | Stored:  9583 | âœ…
   [   4] Expected:  3875 | Stored:  3875 | âœ…
   [   5] Expected:  9743 | Stored:  9743 | âœ…
   [   6] Expected:  6473 | Stored:  6473 | âœ…
   [   7] Expected:  1072 | Stored:  1072 | âœ…
   [   8] Expected:  5901 | Stored:  5901 | âœ…
   [   9] Expected:  7322 | Stored:  7322 | âœ…
   [  10] Expected:  6988 | Stored:  6988 | âœ…
   [  11] Expected:  4301 | Stored:  4301 | âœ…
   [  12] Expected:  6071 | Stored:  6071 | âœ…
   [  13] Expected:  6521 | Stored:  6521 | âœ…
   [  14] Expected:  5553 | Stored:  5553 | âœ…
   [  15] Expected:  8020 | Stored:  8020 | âœ…
   [  16] Expected:  5241 | Stored:  5241 | âœ…
   [  17] Expected:  3464 | Stored:  3464 | âœ…
   [  18] Expected:   883 | Stored:   883 | âœ…
   [  19] Expected:  8457 | Stored:  8457 | âœ…
   [  20] Expected:  3161 | Stored:  3161 | âœ…
   [  21] Expected:  3603 | Stored:  3603 | âœ…
   [  22] Expected:  3792 | Stored:  3792 | âœ…
   [  23] Expected:  9027 | Stored:  9027 | âœ…
   [  24] Expected:  6423 | Stored:  6423 | âœ…
   ... (2475 more elements checked) ...

ğŸ“Š VERIFICATION SUMMARY:
   âœ… Perfect matches: 2500
   âŒ Mismatches: 0
   âš ï¸  Read errors: 0
   ğŸ“ˆ Success rate: 100.0%

ğŸ“ˆ GENERATED DATA STATISTICS:
   ğŸ² Min value: 0
   ğŸ² Max value: 9997
   ğŸ² Average: 5031.8
   ğŸ² Unique values: 2224 / 2500
   ğŸ² First 20 generated values: [6520, 3457, 6445, 9583, 3875, 9743, 6473, 1072, 5901, 7322, 6988, 4301, 6071, 6521, 5553, 8020, 5241, 3464, 883, 8457]

ğŸ‰ PERFECT! All elements correctly stored on server!
ğŸ’¾ Saved 2500 elements to original_elements.json

======================================================================
PHASE 1: CALLING obfi_gen_hash_2.generate_hash_values_streaming()
======================================================================

ğŸ“‹ Figure 7 Lines 4-17: Hash Value Generation (Streaming)
============================================================
ğŸ“Š Parameters:
   Elements: 2500
   Hash functions (k): 7
   Bloom filter size (m): 35944
   Total hashes to stream: 17500
ğŸ”‘ Generated 7 hash functions
âœ… Server ready to receive encrypted hash values

ğŸ“¤ Streaming hash values to server...
   âœ… Processed 100/2500 elements (700 hashes streamed)
   âœ… Processed 200/2500 elements (1400 hashes streamed)
   âœ… Processed 300/2500 elements (2100 hashes streamed)
   âœ… Processed 400/2500 elements (2800 hashes streamed)
   âœ… Processed 500/2500 elements (3500 hashes streamed)
   âœ… Processed 600/2500 elements (4200 hashes streamed)
   âœ… Processed 700/2500 elements (4900 hashes streamed)
   âœ… Processed 800/2500 elements (5600 hashes streamed)
   âœ… Processed 900/2500 elements (6300 hashes streamed)
   âœ… Processed 1000/2500 elements (7000 hashes streamed)
   âœ… Processed 1100/2500 elements (7700 hashes streamed)
   âœ… Processed 1200/2500 elements (8400 hashes streamed)
   âœ… Processed 1300/2500 elements (9100 hashes streamed)
   âœ… Processed 1400/2500 elements (9800 hashes streamed)
   âœ… Processed 1500/2500 elements (10500 hashes streamed)
   âœ… Processed 1600/2500 elements (11200 hashes streamed)
   âœ… Processed 1700/2500 elements (11900 hashes streamed)
   âœ… Processed 1800/2500 elements (12600 hashes streamed)
   âœ… Processed 1900/2500 elements (13300 hashes streamed)
   âœ… Processed 2000/2500 elements (14000 hashes streamed)
   âœ… Processed 2100/2500 elements (14700 hashes streamed)
   âœ… Processed 2200/2500 elements (15400 hashes streamed)
   âœ… Processed 2300/2500 elements (16100 hashes streamed)
   âœ… Processed 2400/2500 elements (16800 hashes streamed)
   âœ… Processed 2500/2500 elements (17500 hashes streamed)

âœ… Streaming complete!
ğŸ“¦ Streamed 17500 encrypted hash values to server
   Expected: 17500
   Match: YES âœ…
âœ… Server confirmed: EV array ready with 17500 values
ğŸ“‹ Ready for Line 18: OBD Protocol

ğŸ”„ Switching server to sorting mode...
âœ… Server ready for sorting: array size = 17500

======================================================================
PHASE 2: RANDOMIZED SHELL SORT (O(1) CLIENT MEMORY)
======================================================================
Array size: 17500
Client working memory: O(1) (only 2 decrypted values at a time)
[CLIENT] Initialized with O(1) memory
[CLIENT] Encryption key is SECRET (never sent to server)

ğŸ”„ Starting Randomized Shell Sort...

======================================================================
SECURE RANDOMIZED SHELL SORT - CLIENT ORCHESTRATING
Array size: 17500
======================================================================

[CLIENT] Iteration 1: offset = 8750 (2 regions)

[CLIENT] Iteration 2: offset = 4375 (4 regions)

[CLIENT] Iteration 3: offset = 2187 (8 regions)

[CLIENT] Iteration 4: offset = 1093 (16 regions)

[CLIENT] Iteration 5: offset = 546 (32 regions)

[CLIENT] Iteration 6: offset = 273 (64 regions)

[CLIENT] Iteration 7: offset = 136 (128 regions)

[CLIENT] Iteration 8: offset = 68 (257 regions)

[CLIENT] Iteration 9: offset = 34 (514 regions)

[CLIENT] Iteration 10: offset = 17 (1029 regions)

[CLIENT] Iteration 11: offset = 8 (2187 regions)

[CLIENT] Iteration 12: offset = 4 (4375 regions)

[CLIENT] Iteration 13: offset = 2 (8750 regions)

[CLIENT] Iteration 14: offset = 1 (17500 regions)

======================================================================
[CLIENT] SORTING COMPLETE
======================================================================

ğŸ” Decrypting final result to verify...

======================================================================
ğŸ“Š PHASE 2 RESULTS
======================================================================
   Sorted: YES âœ…
   Total comparisons: 4370732
   Total writes: 4370732
   First 32 values: [2, 2, 5, 6, 7, 15, 18, 20, 21, 23, 23, 27, 30, 31, 31, 32, 33, 33, 34, 34, 39, 40, 42, 45, 46, 47, 52, 54, 55, 55, 60, 62]

======================================================================
ğŸ‰ PIPELINE COMPLETE
======================================================================
âœ… Phase 0: 2500 elements uploaded (with verification)
âœ… Phase 1: 17500 hash positions generated (with verification)
âœ… Phase 2: Array sorted with 4370732 comparisons

ğŸ” Security Guarantees:
   âœ… Server never received encryption keys
   âœ… Server never saw plaintext values
   âœ… Client used O(1) memory during sorting
   âœ… Access pattern was data-independent

ğŸ“ Verification:
   âœ… Phase 0 verification completed (see above)
   âœ… Phase 1 hash count verified
   âœ… Phase 2 sorting verified: True

ğŸ’¾ Debug Files:
   - original_elements.json (plaintext elements for verification)
======================================================================

âœ… Demo completed successfully!
(base) rahilsharma@Rahils-MacBook-Air Random-Shell-Sort % python main.py


    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                                                                  â•‘
    â•‘  RANDOMIZED SHELL SORT - FULL PIPELINE DEMO                     â•‘
    â•‘  Using Original OBFI Modules (Elaborate & Feature-Complete)     â•‘
    â•‘                                                                  â•‘
    â•‘  Phase 0: data_creation_0.py (with verification)                â•‘
    â•‘  Phase 1: obfi_gen_hash_2.py (with detailed logging)            â•‘
    â•‘  Phase 2: client.py (Randomized Shell Sort)                     â•‘
    â•‘                                                                  â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    

======================================================================
ğŸš€ FULL PIPELINE - USING ORIGINAL OBFI MODULES
======================================================================
ğŸ“Š Auto-calculated Bloom filter size: m = 1438

ğŸ“‹ Pipeline Parameters:
   Elements (s): 100
   Range (n): [0, 9999]
   Hash functions (k): 7
   Bloom filter size (m): 1438
   Total hash positions: 700

ğŸ” Generated encryption keys (CLIENT-SIDE ONLY)
   Keys will NEVER be sent to server

ğŸ”Œ Connecting to server at localhost:50051...

======================================================================
PHASE 0: CALLING data_creation_0.run_phase0_upload()
======================================================================
ğŸ” DEBUG: Using passed parameters s=100, n=10000
================================================================================
ğŸ”¬ OBD PARAMETER CALCULATION SUMMARY
================================================================================
âŒ GUARD CONDITION FAILED
ğŸ“Š Input: s=100, n=10000, Î»=128
ğŸ›¡ï¸  Guard: 3.278 < 128 (required)
âš ï¸  OBD SKIPPED: Using fallback z=1, t=100
================================================================================
ğŸ” DEBUG: Final parameters - s=100, n=10000
ğŸ” DEBUG: OBD globals - PROTOCOL_S=100, PROTOCOL_N=10000

=== Phase 0: Uploading 100 Encrypted Elements to Server ===
Parameters: s=100, n=10000, valid=False
âœ… Server initialized for 100 elements
  Uploaded element 1/100 (success rate: 1/1)
  Uploaded element 100/100 (success rate: 100/100)
âœ… Phase 0 complete: 100/100 elements uploaded
âœ… Phase 0 SUCCESS: 100.0% upload rate

============================================================
ğŸ” PHASE 0 SERVER STORAGE VERIFICATION
============================================================
ğŸ“Š Verification Parameters:
   Total elements uploaded: 100
   Sample size to check: 100
   Expected value range: [0, 9790]

ğŸ” Reading back elements from server...

ğŸ“‹ SERVER STORAGE CONTENTS (First 100 elements):
   [   0] Expected:  8729 | Stored:  8729 | âœ…
   [   1] Expected:  4360 | Stored:  4360 | âœ…
   [   2] Expected:  8628 | Stored:  8628 | âœ…
   [   3] Expected:  1526 | Stored:  1526 | âœ…
   [   4] Expected:  2243 | Stored:  2243 | âœ…
   [   5] Expected:  2259 | Stored:  2259 | âœ…
   [   6] Expected:  1786 | Stored:  1786 | âœ…
   [   7] Expected:  6590 | Stored:  6590 | âœ…
   [   8] Expected:  4760 | Stored:  4760 | âœ…
   [   9] Expected:  7637 | Stored:  7637 | âœ…
   [  10] Expected:  1774 | Stored:  1774 | âœ…
   [  11] Expected:  8602 | Stored:  8602 | âœ…
   [  12] Expected:  3834 | Stored:  3834 | âœ…
   [  13] Expected:  9216 | Stored:  9216 | âœ…
   [  14] Expected:  3149 | Stored:  3149 | âœ…
   [  15] Expected:  6731 | Stored:  6731 | âœ…
   [  16] Expected:  4826 | Stored:  4826 | âœ…
   [  17] Expected:  1094 | Stored:  1094 | âœ…
   [  18] Expected:  9637 | Stored:  9637 | âœ…
   [  19] Expected:  5978 | Stored:  5978 | âœ…
   [  20] Expected:  8141 | Stored:  8141 | âœ…
   [  21] Expected:   634 | Stored:   634 | âœ…
   [  22] Expected:  6964 | Stored:  6964 | âœ…
   [  23] Expected:  1321 | Stored:  1321 | âœ…
   [  24] Expected:  7991 | Stored:  7991 | âœ…
   ... (75 more elements checked) ...

ğŸ“Š VERIFICATION SUMMARY:
   âœ… Perfect matches: 100
   âŒ Mismatches: 0
   âš ï¸  Read errors: 0
   ğŸ“ˆ Success rate: 100.0%

ğŸ“ˆ GENERATED DATA STATISTICS:
   ğŸ² Min value: 1
   ğŸ² Max value: 9790
   ğŸ² Average: 4871.4
   ğŸ² Unique values: 99 / 100
   ğŸ² First 20 generated values: [8729, 4360, 8628, 1526, 2243, 2259, 1786, 6590, 4760, 7637, 1774, 8602, 3834, 9216, 3149, 6731, 4826, 1094, 9637, 5978]

ğŸ‰ PERFECT! All elements correctly stored on server!
ğŸ’¾ Saved 100 elements to original_elements.json

======================================================================
PHASE 1: CALLING obfi_gen_hash_2.generate_hash_values_streaming()
======================================================================

ğŸ“‹ Figure 7 Lines 4-17: Hash Value Generation (Streaming)
============================================================
ğŸ“Š Parameters:
   Elements: 100
   Hash functions (k): 7
   Bloom filter size (m): 1438
   Total hashes to stream: 700
ğŸ”‘ Generated 7 hash functions
âœ… Server ready to receive encrypted hash values

ğŸ“¤ Streaming hash values to server...
   âœ… Processed 100/100 elements (700 hashes streamed)

âœ… Streaming complete!
ğŸ“¦ Streamed 700 encrypted hash values to server
   Expected: 700
   Match: YES âœ…
âœ… Server confirmed: EV array ready with 700 values
ğŸ“‹ Ready for Line 18: OBD Protocol

ğŸ”„ Switching server to sorting mode...
âœ… Server ready for sorting: array size = 700

======================================================================
PHASE 2: RANDOMIZED SHELL SORT (O(1) CLIENT MEMORY)
======================================================================
Array size: 700
Client working memory: O(1) (only 2 decrypted values at a time)
[CLIENT] Initialized with O(1) memory
[CLIENT] Encryption key is SECRET (never sent to server)

ğŸ”„ Starting Randomized Shell Sort...

======================================================================
SECURE RANDOMIZED SHELL SORT - CLIENT ORCHESTRATING
Array size: 700
======================================================================

[CLIENT] Iteration 1: offset = 350 (2 regions)

[CLIENT] Iteration 2: offset = 175 (4 regions)

[CLIENT] Iteration 3: offset = 87 (8 regions)

[CLIENT] Iteration 4: offset = 43 (16 regions)

[CLIENT] Iteration 5: offset = 21 (33 regions)

[CLIENT] Iteration 6: offset = 10 (70 regions)

[CLIENT] Iteration 7: offset = 5 (140 regions)

[CLIENT] Iteration 8: offset = 2 (350 regions)

[CLIENT] Iteration 9: offset = 1 (700 regions)

======================================================================
[CLIENT] SORTING COMPLETE
======================================================================

ğŸ” Decrypting final result to verify...

======================================================================
ğŸ“Š PHASE 2 RESULTS
======================================================================
   Sorted: YES âœ…
   Total comparisons: 104732
   Total writes: 104732
   First 32 values: [1, 1, 2, 2, 7, 9, 10, 18, 20, 21, 21, 24, 24, 27, 29, 31, 36, 36, 39, 42, 45, 46, 47, 48, 51, 52, 53, 59, 59, 69, 69, 74]

======================================================================
ğŸ‰ PIPELINE COMPLETE
======================================================================
âœ… Phase 0: 100 elements uploaded (with verification)
âœ… Phase 1: 700 hash positions generated (with verification)
âœ… Phase 2: Array sorted with 104732 comparisons

ğŸ” Security Guarantees:
   âœ… Server never received encryption keys
   âœ… Server never saw plaintext values
   âœ… Client used O(1) memory during sorting
   âœ… Access pattern was data-independent

ğŸ“ Verification:
   âœ… Phase 0 verification completed (see above)
   âœ… Phase 1 hash count verified
   âœ… Phase 2 sorting verified: True

ğŸ’¾ Debug Files:
   - original_elements.json (plaintext elements for verification)
======================================================================

âœ… Demo completed successfully!
(base) rahilsharma@Rahils-MacBook-Air Random-Shell-Sort % 